<!DOCTYPE html>
<html>
    <head>
        <title>Contribute</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="../res/css/koboldadventurehelp.css" rel="stylesheet">
        <link href="../res/css/themes/forest.css" rel="stylesheet">
        <link rel="shortcut icon" type="image/png" href="../favicon.png"/>
        <script src="../res/js/lib/jquery-2.2.0.min.js"></script>
    </head>

    <body>

        <div class="koboldadventurehelppage">

            <h1 class="koboldadventurehelppagetitle">
                Contributing
            </h1>

            <hr class="koboldadventurehelppagetitleline">

            <div class="koboldadventurehelppagemain">

                <h1 class="koboldadventurehelppagesubtitle">
                    Writing scenes
                </h1>

                <p class="koboldadventurehelppagetext">
                    Writing scenes for Kobold Adventure is rather easy. Scenes are a combination of HTML, CSS and JavaScript. If you are at all familiar
                    with creating simple websites, then making a Kobold Adventure scene will be a piece of cake. Let's get started, shall we?
                </p>

                <h2 class="koboldadventurehelppagesubsubtitle">
                    The basics
                </h2>

                <p class="koboldadventurehelppagetext">
                    A very basic scene needs only four things.

                </p>

                <code class="todo">TODO: FINISH THIS SECTION</code>


                <h2 class="koboldadventurehelppagesubsubtitle">
                    Writing style
                </h2>

                <code class="todo">TODO: FINISH THIS SECTION</code>


                <h2 class="koboldadventurehelppagesubsubtitle">
                    Scene life cycle
                </h2>

                <code class="todo">TODO: FINISH THIS SECTION</code>


                <h2 class="koboldadventurehelppagesubsubtitle">
                    index.html
                </h2>

                <p class="koboldadventurehelppagetext">
                    <code><span class="codehtmltag">&lt;div</span> <span class="codehtmlattribute">class=</span><span class="codestring">"koboldadventurecontent"</span><span class="codehtmltag">&gt;</span></code>,
                    and it must end with 
                    <code><span class="codehtmltag">&lt;div</span> <span class="codehtmlattribute">class=</span><span class="codestring">"koboldadventurefinish"</span><span class="codehtmltag">&gt;</span><span class="codehtmltag">&lt;/div&gt;</span><span class="codehtmltag">&lt;/div&gt;</span></code>. 
                    These are what we call the begin and end tags of the scene. All of the scene's content, including JavaScript and CSS styles will go in between these two tags.
                </p>

                <code class="todo">TODO: FINISH THIS SECTION</code>

                <h2 class="koboldadventurehelppagesubsubtitle">
                    Kobold preprocessor
                </h2>

                <p class="koboldadventurehelppagetext">
                    The Kobold preprocessor allows you to make your scenes a more dynamic by letting you write JavaScript code inside of regular text. 
                </p>

                <table class="koboldadventurehelppagetable">
                    
                    <tr>
                        <th>
                            Token
                        </th>
                        <th class="koboldadventurehelppagetablecentercolumn">
                            Use
                        </th>
                        <th>
                            Effect
                        </th>
                    </tr>
                    
                    
                    <tr class="koboldadventurehelppagetablenewsection">
                        <td>
                            $print()
                        </td>
                        <td>
                            Any JavaScript. "Show stuff"
                        </td>
                        <td rowspan="8" class="koboldadventurehelppagetablerightcolumn">
                            Anything between the braces will be parsed as JavaScript. The result will be printed into the scene. 
                            Can theoretically be used to do anything, but should only be used if no other, more specific token is available.
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $pri()
                        </td>
                        <td>
                            Shorthand for $print().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $p()
                        </td>
                        <td>
                            Shorthand for $pri().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $show()
                        </td>
                        <td>
                            Alias for $print().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $sh()
                        </td>
                        <td>
                            Shorthand for $show().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $function()
                        </td>
                        <td>
                            Regular functions. Alias for $print().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $fun()
                        </td>
                        <td>
                            Shorthand for $function().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $unf()
                        </td>
                        <td>
                            Alias for $fun().
                        </td>
                    </tr>
                    
                    
                    <tr class="koboldadventurehelppagetablenewsection">
                        <td>
                            $method()
                        </td>
                        <td>
                            Regular methods. "Do stuff"
                        </td>
                        <td rowspan="4" class="koboldadventurehelppagetablerightcolumn">
                            Anything between the braces will be parsed as JavaScript. The result will be discarded. 
                            Should only be used if no other, more specific token is available.
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $meth()
                        </td>
                        <td>
                            Shorthand for $method().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $do()
                        </td>
                        <td>
                            Alias for $method().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $d()
                        </td>
                        <td>
                            Shorthand for $do().
                        </td>
                    </tr>
                    
                    
                    <tr class="koboldadventurehelppagetablenewsection">
                        <td>
                            $kobold()
                        </td>
                        <td>
                            Kobold object functions and variables.
                        </td>
                        <td rowspan="3" class="koboldadventurehelppagetablerightcolumn">
                            Anything between the braces will be parsed as a kobold object function or variable.
                            Variables will be printed. Functions will be executed and then the result will be printed.
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $kob()
                        </td>
                        <td>
                            Shorthand for $kobold().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $k()
                        </td>
                        <td>
                            Shorthand for $kob().
                        </td>
                    </tr>
                    
                    
                    <tr class="koboldadventurehelppagetablenewsection">
                        <td>
                            $nobold()
                        </td>
                        <td>
                            Kobold object methods.
                        </td>
                        <td rowspan="3" class="koboldadventurehelppagetablerightcolumn">
                            Anything between the braces will be parsed as a kobold object method.
                            The method will be executed. The result will not be printed.
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $nob()
                        </td>
                        <td>
                            Shorthand for $nobold().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $n()
                        </td>
                        <td>
                            Shorthand for $nob().
                        </td>
                    </tr>
                    
                    
                    <tr class="koboldadventurehelppagetablenewsection">
                        <td>
                            $scene()
                        </td>
                        <td>
                            Scene object functions.
                        </td>
                        <td rowspan="3" class="koboldadventurehelppagetablerightcolumn">
                            Anything between the braces will be parsed as a scene object function or variable.
                            Variables will be printed. Functions will be executed and then the result will be printed.
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $sc()
                        </td>
                        <td>
                            Shorthand for $scene().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $s()
                        </td>
                        <td>
                            Shorthand for $sc().
                        </td>
                    </tr>
                    
                    
                    <tr class="koboldadventurehelppagetablenewsection">
                        <td>
                            $scenem()
                        </td>
                        <td>
                            Scene object methods.
                        </td>
                        <td rowspan="6" class="koboldadventurehelppagetablerightcolumn">
                            Anything between the braces will be parsed as a scene object method.
                            The method will be executed. The result will not be printed.
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $scenedo()
                        </td>
                        <td>
                            Alias for $scenem().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $scdo()
                        </td>
                        <td>
                            Shorthand for $scenedo().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $sdo()
                        </td>
                        <td>
                            Shorthand for $scdo().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $sc2()
                        </td>
                        <td>
                            Alias for $scdo().
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            $s2()
                        </td>
                        <td>
                            Shorthand for $sc2().
                        </td>
                    </tr>
                    
                </table>
                
                <p class="koboldadventurehelppagetext">
                    NOTE: do NOT put any unclosed parenthesis inside of preprocessor directive. Not even within strings. This breaks the preprocessor.
                    Closed parenthesis are fine. Example: $show("I like (.)(.)") is fine. $show("I am sad :(") will break. $do(myFunction("I am happy :)")) will break.
                </p>

                <code class="todo">TODO: FINISH THIS SECTION</code>

                <h2 class="koboldadventurehelppagesubsubtitle">
                    init.js
                </h2>

                <code class="todo">TODO: FINISH THIS SECTION</code>


                <h2 class="koboldadventurehelppagesubsubtitle">
                    afterload.js
                </h2>

                <code class="todo">TODO: FINISH THIS SECTION</code>


                <h2 class="koboldadventurehelppagesubsubtitle">
                    Choices
                </h2>

                <p class="koboldadventurehelppagetext">
                    Arguably the hardest part of writing a scene is not the writing itself, but rather adding code that will enable the selection of choices.
                    Luckily, Kobold Adventure provides a flexible way of handling this aspect of scene writing, called the simpleChoice framework. First, we
                    will detail the different components of choice selection code. Then we will show an example of doing it the hard way. Finally, we will
                    refactor this example to the simpleChoice framework.
                </p>

                <code class="todo">TODO: FINISH THIS SECTION</code>

                <hr class="koboldadventurehelppagecontentseparator">


                <h1 class="koboldadventurehelppagesubtitle">
                    Useful functions
                </h1>

                <p class="koboldadventurehelppagetext">
                    Here are a few JavaScript functions which may be called from anywhere within your scene. They provide basic functionality such as animation, 
                    description fetching and theme changing.
                </p>

                <h2 class="koboldadventurehelppagesubsubtitle">
                    Animation
                </h2>

                <p class="koboldadventurehelppagetext">
                    There are two main methods used for animation: <span class="bold">animateAddClass</span> and <span class="bold">animateRemoveClass</span>.
                    Both of these methods have five different levels of speed: <span class="bold">very fast</span>, <span class="bold">fast</span>, 
                    <span class="bold">regular</span>, <span class="bold">slow</span> and <span class="bold">very slow</span>. This gives us the
                    following ten functions to work with:
                </p>

                <div class="koboldadventurehelppagehalf">
                    <ul class="koboldadventurehelppagesummation">
                        <li><code><span class=codefunction>animateRemoveClassVeryFast</span>(<span class="codevar">elements</span>, <span class="codevar">toRemove</span>)</code></li>
                        <li><code><span class=codefunction>animateRemoveClassFast</span>(<span class="codevar">elements</span>, <span class="codevar">toRemove</span>)</code></li>
                        <li><code><span class=codefunction>animateRemoveClass</span>(<span class="codevar">elements</span>, <span class="codevar">toRemove</span>)</code></li>
                        <li><code><span class=codefunction>animateRemoveClassSlow</span>(<span class="codevar">elements</span>, <span class="codevar">toRemove</span>)</code></li>
                        <li><code><span class=codefunction>animateRemoveClassVerySlow</span>(<span class="codevar">elements</span>, <span class="codevar">toRemove</span>)</code></li>
                    </ul>
                </div>
                <div class="koboldadventurehelppagehalf">
                    <ul class="koboldadventurehelppagesummation">
                        <li><code><span class=codefunction>animateAddClassVeryFast</span>(<span class="codevar">elements</span>, <span class="codevar">toAdd</span>)</code></li>
                        <li><code><span class=codefunction>animateAddClassFast</span>(<span class="codevar">elements</span>, <span class="codevar">toAdd</span>)</code></li>
                        <li><code><span class=codefunction>animateAddClass</span>(<span class="codevar">elements</span>, <span class="codevar">toAdd</span>)</code></li>
                        <li><code><span class=codefunction>animateAddClassSlow</span>(<span class="codevar">elements</span>, <span class="codevar">toAdd</span>)</code></li>
                        <li><code><span class=codefunction>animateAddClassVerySlow</span>(<span class="codevar">elements</span>, <span class="codevar">toAdd</span>)</code></li>
                    </ul>
                </div>

                <p class="koboldadventurehelppagetext">
                    As you may have noticed, each of these functions has exactly two arguments. The former is always the set of elements to which to apply the 
                    change. The latter indicates the CSS class which should be added or removed. Note that certain CSS attributes, such as font-weight, can
                    <span class="bold">not</span> be animated.
                </p>

                <h3 class="koboldadventurehelppagesubsubsubtitle">
                    Example
                </h3>

                <p class="koboldadventurehelppagetext">
                    Say we have a <code><span class="codehtmltag">&lt;div&gt;</span></code> with <code><span class="codehtmlattribute">id=</span><span class="codestring">"animateclasschange"</span></code> and <code><span class="codehtmlattribute">class=</span><span class="codestring">"whitebg"</span></code>. Something like this:
                </p>

                <div class="koboldadventurehelppagecodeblock">
                    <code>
                        <span class="codehtmltag">&lt;div</span> <span class="codehtmlattribute">id=</span><span class="codestring">"animateclasschange"</span> <span class="codehtmlattribute">class=</span><span class="codestring">"whitebg"</span><span class="codehtmltag">&gt;</span><br>
                        &emsp;&emsp;&emsp;&emsp;content<br>
                        <span class="codehtmltag">&lt;/div&gt;</span><br>
                    </code>
                </div>

                <p class="koboldadventurehelppagetext">
                    We want to remove the <code><span class="codestring">whitebg</span></code> class, whilst animating the changes. We do this by using the 
                    <code><span class=codefunction>animateRemoveClass</span></code> function.
                </p>

                <div class="koboldadventurehelppagecodeblock">
                    <code>
                        <span class="codevarkeyword">var</span> <span class="codevar">elements</span> = <span class=codefunction>$</span>(<span class="codestring">"#animateclasschange"</span>); <span class="codecomment">// Select the element using jQuery</span><br>
                        <span class="codevarkeyword">var</span> <span class="codevar">classToRemove</span> = <span class="codestring">"whitebg"</span>; <span class="codecomment">// Specify the class to remove</span><br>
                        <span class=codefunction>animateRemoveClass</span>(<span class="codevar">elements</span>, <span class="codevar">classToRemove</span>); <span class="codecomment">// Call the function</span><br>
                    </code>
                </div>

                <p class="koboldadventurehelppagetext">
                    We can add the class once more by calling the <code>animateAddClass</code> function in a very similar manner.
                </p>

                <div class="koboldadventurehelppagecodeblock">
                    <code>
                        <span class="codevarkeyword">var</span> <span class="codevar">elements</span> = <span class=codefunction>$</span>(<span class="codestring">"#animateclasschange"</span>); <span class="codecomment">// Select the element using jQuery</span><br>
                        <span class="codevarkeyword">var</span> <span class="codevar">classToAdd</span> = <span class="codestring">"whitebg"</span>; <span class="codecomment">// Specify the class to add</span><br>
                        <span class=codefunction>animateAddClass</span>(<span class="codevar">elements</span>, <span class="codevar">classToAdd</span>); <span class="codecomment">// Call the function</span><br>
                    </code>
                </div>

                <h3 class="koboldadventurehelppagesubsubsubtitle">
                    Interactive example
                </h3>

                <div id="animateclasschange" class="whitebg">
                    content
                </div>

                <button class="koboldadventurehelppagebutton" onclick="removeWhiteBG()">
                    Remove whitebg class
                </button>

                <button class="koboldadventurehelppagebutton" onclick="addWhiteBG()">
                    Add whitebg class
                </button>

                <script>
                    function removeWhiteBG() {
                        var elements = $("#animateclasschange"); // Select the element using jQuery
                        var classToRemove = "whitebg"; // Specify the class to remove
                        animateRemoveClass(elements, classToRemove); // Call the function
                    }

                    function addWhiteBG() {
                        var elements = $("#animateclasschange"); // Select the element using jQuery
                        var classToAdd = "whitebg"; // Specify the class to add
                        animateAddClass(elements, classToAdd); // Call the function
                    }
                </script>

                <h3 class="koboldadventurehelppagesubsubsubtitle">
                    Final notes
                </h3>

                <p class="koboldadventurehelppagetext">
                    While transitions are undoubtedly a neat feature, and they can spruce up a scene quite a bit, try not to overuse them.
                    They are time consuming, and if you cram too many of them in a single page, they might begin to annoy the user.
                </p>

                <p class="koboldadventurehelppagetext">
                    Note that in the above example, the animation breaks when you rapidly mash both of the buttons in quick succession.
                    This is due to the way that class transitions are handled by the Kobold Adventure framework. While the animation
                    breaking isn't a big deal, it is advised not to allow these functions to be alternatingly called in quick succession 
                    on the same element. In other words: don't allow the users to toggle a class on and off like in the example above. 
                    Instead, only allow them to do either one or the other.
                </p>

                <h2 class="koboldadventurehelppagesubsubtitle">
                    Changing themes
                </h2>

                <p class="koboldadventurehelppagetext">
                    In order to change the entire color scheme of the game for the duration of your scene, you can make use of a theme.
                    Themes are a collection of CSS rules that define four colors: the <span class="bold">main</span> color, the 
                    <span class="bold">detail</span> color, the <span class="bold">background</span> color and the 
                    <span class="bold">text</span> color. Making use of a theme can make your scene a lot more immersive,
                    yet care should be taken to avoid <span class="italic">overdoing</span> it.
                </p>

                <p class="koboldadventurehelppagetext">
                    Applying a theme is rather easy. All you have to do is call the JavaScript function <code><span class=codefunction>changeTheme</span></code>.
                    It takes only one parameter: the theme you wish to change to. Note that this function takes over a second to completely change
                    the theme, and during that duration no animations will be available. This function is rather unsafe to use, because you can't
                    guarantee the user won't change tabs, press buttons or do other stuff during the transition, which might lead to certain 
                    animations breaking for the remainder of the session.
                </p>

                <p class="koboldadventurehelppagetext">
                    So why would you ever use <code><span class=codefunction>changeTheme</span></code>? Because it's simple. There is, however, a more complex
                    alternative called <code><span class=codefunction>changeThemeCallback</span></code>. This function takes two parameters: the theme you wish
                    to change to, and a callback function that will be called once the theme change is complete. While inherently having the same
                    issues as <code><span class=codefunction>changeTheme</span></code>, you can manually disable UI elements prior to calling it, and then 
                    re-enable them in the callback function. In a later version of Kobold Adventure, a simpler way of doing this will be provided.
                </p>

                <h3 class="koboldadventurehelppagesubsubsubtitle">
                    Writing your own theme
                </h3>

                <code class="todo">TODO: FINISH THIS SECTION</code>

            </div>

        </div>

        <script src="../res/js/lowlevel.js"></script>
        <script src="../res/js/useful.js"></script>

    </body>
</html>
